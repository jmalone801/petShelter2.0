{"ast":null,"code":"var _jsxFileName = \"/Users/jamesmalone/Documents/Coding Stuff/Personal Projects/petShelter/client/src/components/Form/PetForm.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport background from \"../assets/petBackground.png\";\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport { Paper } from '@mui/material';\nimport FormNav from '../Nav/FormNav';\nimport Footer from '../Footer/footer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PetForm = props => {\n  _s();\n\n  const [name, setName] = useState(\"\");\n  const [type, setType] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [skillOne, setSkillOne] = useState(\"\");\n  const [skillTwo, setSkillTwo] = useState(\"\");\n  const [skillThree, setSkillThree] = useState(\"\");\n  const [errors, setErrors] = useState({});\n  const history = useHistory();\n  const [fileInputState, setFileInputState] = useState('');\n  const [previewSource, setPreviewSource] = useState('');\n  const [selectedFile, setSelectedFile] = useState(); //handler when the form is submitted\n\n  const onSubmitHandler = async event => {\n    event.preventDefault(); // image upload\n\n    if (!selectedFile) return;\n    const reader = new FileReader();\n    reader.readAsDataURL(selectedFile);\n\n    reader.onloadend = () => {\n      uploadImage(reader.result);\n    };\n\n    reader.onerror = () => {\n      console.error('AHHHHHHHH!!');\n    }; // upload to cloudinary\n\n\n    const formData = new FormData();\n    formData.append('selectedFile', selectedFile);\n    formData.append('upload_preset', 'petShelterUploads');\n    const result = await axios.post('https://api.cloudinary.com/v1_1/${process.env.REACT_APP_CLOUDINARY_COULD_NAME}/image/upload', formData);\n    console.log(result);\n    axios.post('http://localhost:8000/api/pets/new', {\n      name,\n      type,\n      description,\n      skillOne,\n      skillTwo,\n      skillThree,\n      image,\n      cloudinary_id\n    }) // Displays validiations\n    .then(res => {\n      console.log(res);\n\n      if (res.data.errors) {\n        setErrors(res.data.errors);\n      } // Clears input fields\n      else {\n        setName(\"\");\n        setType(\"\");\n        setDescription(\"\");\n        setSkillOne(\"\");\n        setSkillTwo(\"\");\n        setSkillThree(\"\");\n        setErrors(\"\"); // history.push(\"/\")\n      }\n    }).catch(err => console.log(err));\n  }; // test ======================================================\n\n\n  const handleFileInputChange = e => {\n    const file = e.target.files[0];\n    previewFile(file);\n    setSelectedFile(file);\n    setFileInputState(e.target.value);\n  };\n\n  const previewFile = file => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onloadend = () => {\n      setPreviewSource(reader.result);\n    };\n  }; // const handleSubmitFile = (e) => {\n  //     e.preventDefault();\n  //     if (!selectedFile) return;\n  //     const reader = new FileReader();\n  //     reader.readAsDataURL(selectedFile);\n  //     reader.onloadend = () => {\n  //         uploadImage(reader.result);\n  //     };\n  //     reader.onerror = () => {\n  //         console.error('AHHHHHHHH!!');\n  //     };\n  // };\n\n\n  const uploadImage = async base64EncodedImage => {\n    console.log(base64EncodedImage);\n\n    try {\n      await fetch('http://localhost:8000/api/upload/image', {\n        method: 'POST',\n        body: JSON.stringify({\n          data: base64EncodedImage\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      setFileInputState('');\n      setPreviewSource('');\n    } catch (err) {\n      console.error(err);\n    }\n  }; // test ======================================================\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(FormNav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        backgroundImage: `url(${background})`,\n        backgroundRepeat: 'repeat',\n        marginTop: '60px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginTop: '40px',\n            marginBottom: '20px',\n            fontWeight: 'bold'\n          },\n          children: \"Know a pet in need of a good home?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 2,\n          style: {\n            width: '600px',\n            padding: 20,\n            marginBottom: '100px',\n            backgroundColor: \"rgb(247 247 247 / 87%)\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: onSubmitHandler,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                flexDirection: 'column',\n                justifyContent: 'space-between',\n                columnGap: '80px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                style: {\n                  textAlign: 'left'\n                },\n                children: \"Pet Information\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Pet Name\",\n                type: \"text\",\n                variant: \"filled\",\n                fullWidth: true,\n                onChange: event => setName(event.target.value),\n                value: name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"danger\",\n                children: errors.name ? errors.name.message : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Pet Type\",\n                type: \"text\",\n                variant: \"filled\",\n                fullWidth: true,\n                onChange: event => setType(event.target.value),\n                value: type\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"danger\",\n                children: errors.type ? errors.type.message : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Pet Description\",\n                type: \"text\",\n                variant: \"filled\",\n                multiline: true,\n                rows: 4,\n                fullWidth: true,\n                onChange: event => setDescription(event.target.value),\n                value: description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"danger\",\n                children: errors.description ? errors.description.message : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                style: {\n                  textAlign: 'left'\n                },\n                children: [\"Pet Skills \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: 'grey'\n                  },\n                  children: \"(Optional)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 78\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Skill One\",\n                type: \"text\",\n                variant: \"filled\",\n                fullWidth: true,\n                onChange: event => setSkillOne(event.target.value),\n                value: skillOne\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Skill Two\",\n                type: \"text\",\n                variant: \"filled\",\n                fullWidth: true,\n                onChange: event => setSkillTwo(event.target.value),\n                value: skillTwo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Skill Three\",\n                type: \"text\",\n                variant: \"filled\",\n                fullWidth: true,\n                onChange: event => setSkillThree(event.target.value),\n                value: skillThree\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"fileInput\",\n                type: \"file\",\n                name: \"image\",\n                onChange: handleFileInputChange,\n                value: fileInputState,\n                className: \"form-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  href: \"/\",\n                  variant: \"text\",\n                  style: {\n                    color: 'grey'\n                  },\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  variant: \"contained\",\n                  style: {\n                    backgroundColor: 'rgb(248, 181, 161)',\n                    width: '140px'\n                  },\n                  children: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 29\n            }, this), previewSource && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: previewSource,\n              alt: \"chosen\",\n              style: {\n                height: '300px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PetForm, \"kskNZAeMTeeuD0gWeyjeAMynz58=\", false, function () {\n  return [useHistory];\n});\n\n_c = PetForm;\nexport default PetForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PetForm\");","map":{"version":3,"sources":["/Users/jamesmalone/Documents/Coding Stuff/Personal Projects/petShelter/client/src/components/Form/PetForm.jsx"],"names":["axios","React","useState","useHistory","background","Button","TextField","Paper","FormNav","Footer","PetForm","props","name","setName","type","setType","description","setDescription","skillOne","setSkillOne","skillTwo","setSkillTwo","skillThree","setSkillThree","errors","setErrors","history","fileInputState","setFileInputState","previewSource","setPreviewSource","selectedFile","setSelectedFile","onSubmitHandler","event","preventDefault","reader","FileReader","readAsDataURL","onloadend","uploadImage","result","onerror","console","error","formData","FormData","append","post","log","image","cloudinary_id","then","res","data","catch","err","handleFileInputChange","e","file","target","files","previewFile","value","base64EncodedImage","fetch","method","body","JSON","stringify","headers","display","justifyContent","backgroundImage","backgroundRepeat","marginTop","marginBottom","fontWeight","width","padding","backgroundColor","flexDirection","columnGap","textAlign","message","color","height"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useState } from 'react'\nimport { useHistory } from \"react-router-dom\";\nimport background from \"../assets/petBackground.png\";\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport { Paper } from '@mui/material';\nimport FormNav from '../Nav/FormNav';\nimport Footer from '../Footer/footer';\n\n\nconst PetForm = (props) => {\n    const [name, setName] = useState(\"\");\n    const [type, setType] = useState(\"\");\n    const [description, setDescription] = useState(\"\");\n    const [skillOne, setSkillOne] = useState(\"\");\n    const [skillTwo, setSkillTwo] = useState(\"\");\n    const [skillThree, setSkillThree] = useState(\"\");\n    const [errors, setErrors] = useState({});\n    const history = useHistory();\n\n    const [fileInputState, setFileInputState] = useState('');\n    const [previewSource, setPreviewSource] = useState('');\n    const [selectedFile, setSelectedFile] = useState();\n\n\n    //handler when the form is submitted\n    const onSubmitHandler = async event => {\n        event.preventDefault();\n        // image upload\n        if (!selectedFile) return;\n        const reader = new FileReader();\n        reader.readAsDataURL(selectedFile);\n        reader.onloadend = () => {\n            uploadImage(reader.result);\n        };\n        reader.onerror = () => {\n            console.error('AHHHHHHHH!!');\n        };\n\n        // upload to cloudinary\n        const formData = new FormData();\n        formData.append('selectedFile', selectedFile)\n        formData.append('upload_preset', 'petShelterUploads')\n\n        const result = await axios.post('https://api.cloudinary.com/v1_1/${process.env.REACT_APP_CLOUDINARY_COULD_NAME}/image/upload', formData)\n        console.log(result)\n        \n        axios.post('http://localhost:8000/api/pets/new', {\n            name,\n            type,\n            description,\n            skillOne,\n            skillTwo,\n            skillThree,\n            image,\n            cloudinary_id\n        })\n            // Displays validiations\n            .then(res => {\n                console.log(res)\n                if (res.data.errors) {\n                    setErrors(res.data.errors)\n                }\n                // Clears input fields\n                else {\n                    setName(\"\")\n                    setType(\"\")\n                    setDescription(\"\")\n                    setSkillOne(\"\")\n                    setSkillTwo(\"\")\n                    setSkillThree(\"\")\n                    setErrors(\"\")\n                    // history.push(\"/\")\n                }\n            })\n            .catch(err => console.log(err))\n    }\n\n    // test ======================================================\n    const handleFileInputChange = (e) => {\n        const file = e.target.files[0];\n        previewFile(file);\n        setSelectedFile(file);\n        setFileInputState(e.target.value);\n    };\n\n    const previewFile = (file) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onloadend = () => {\n            setPreviewSource(reader.result);\n        };\n    };\n\n    // const handleSubmitFile = (e) => {\n    //     e.preventDefault();\n    //     if (!selectedFile) return;\n    //     const reader = new FileReader();\n    //     reader.readAsDataURL(selectedFile);\n    //     reader.onloadend = () => {\n    //         uploadImage(reader.result);\n    //     };\n    //     reader.onerror = () => {\n    //         console.error('AHHHHHHHH!!');\n    //     };\n    // };\n\n    const uploadImage = async (base64EncodedImage) => {\n        console.log(base64EncodedImage)\n        try {\n            await fetch('http://localhost:8000/api/upload/image', {\n                method: 'POST',\n                body: JSON.stringify({ data: base64EncodedImage }),\n                headers: { 'Content-Type': 'application/json' },\n            });\n            setFileInputState('');\n            setPreviewSource('');\n        } catch (err) {\n            console.error(err);\n        }\n    };\n    // test ======================================================\n\n\n\n    return (\n        <div>\n            <FormNav />\n            <div style={{\n                display: 'flex',\n                justifyContent: 'center',\n                backgroundImage: `url(${background})`,\n                backgroundRepeat: 'repeat',\n                marginTop: '60px',\n            }}>\n\n                <div>\n                    <h3 style={{ marginTop: '40px', marginBottom: '20px', fontWeight: 'bold' }}>Know a pet in need of a good home?</h3>\n                    <Paper\n                        elevation={2}\n                        style={{\n                            width: '600px',\n                            padding: 20,\n                            marginBottom: '100px',\n                            backgroundColor: \"rgb(247 247 247 / 87%)\"\n                        }}>\n                        <form onSubmit={onSubmitHandler}>\n                            <div style={{\n                                display: 'flex',\n                                flexDirection: 'column',\n                                justifyContent: 'space-between',\n                                columnGap: '80px'\n                            }} >\n                                <h5 style={{ textAlign: 'left' }}>Pet Information</h5>\n                                <TextField\n                                    label=\"Pet Name\"\n                                    type=\"text\"\n                                    variant=\"filled\"\n                                    fullWidth\n                                    onChange={(event) => setName(event.target.value)} value={name} />\n                                <p className='danger'>{errors.name ? errors.name.message : \"\"}</p>\n                                <TextField\n                                    label=\"Pet Type\"\n                                    type=\"text\" variant=\"filled\"\n                                    fullWidth\n                                    onChange={(event) => setType(event.target.value)} value={type} />\n                                <p className='danger'>{errors.type ? errors.type.message : \"\"}</p>\n                                <TextField\n                                    label=\"Pet Description\"\n                                    type=\"text\"\n                                    variant=\"filled\"\n                                    multiline\n                                    rows={4}\n                                    fullWidth\n                                    onChange={(event) => setDescription(event.target.value)} value={description} />\n                                <p className='danger'>{errors.description ? errors.description.message : \"\"}</p>\n                                <hr />\n                                <h5 style={{ textAlign: 'left' }}>Pet Skills <span style={{ color: 'grey' }} >(Optional)</span></h5>\n                                <TextField\n                                    label=\"Skill One\"\n                                    type=\"text\"\n                                    variant=\"filled\"\n                                    fullWidth\n                                    onChange={(event) => setSkillOne(event.target.value)} value={skillOne} />\n                                <p></p>\n                                <TextField\n                                    label=\"Skill Two\"\n                                    type=\"text\"\n                                    variant=\"filled\"\n                                    fullWidth\n                                    onChange={(event) => setSkillTwo(event.target.value)} value={skillTwo} />\n                                <p></p>\n                                <TextField\n                                    label=\"Skill Three\"\n                                    type=\"text\"\n                                    variant=\"filled\"\n                                    fullWidth\n                                    onChange={(event) => setSkillThree(event.target.value)} value={skillThree} />\n                                <p></p>\n\n                                <input\n                                    id=\"fileInput\"\n                                    type=\"file\"\n                                    name=\"image\"\n                                    onChange={handleFileInputChange}\n                                    value={fileInputState}\n                                    className=\"form-input\"\n                                />\n\n                                <br></br>\n                                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                                    <Button\n                                        href=\"/\"\n                                        variant=\"text\"\n                                        style={{ color: 'grey' }}>Cancel\n                                    </Button>\n                                    <Button\n                                        type=\"submit\"\n                                        variant=\"contained\"\n                                        style={{ backgroundColor: 'rgb(248, 181, 161)', width: '140px' }}>Submit\n                                    </Button>\n                                </div>\n                            </div>\n                            {previewSource && (\n                                <img\n                                    src={previewSource}\n                                    alt=\"chosen\"\n                                    style={{ height: '300px' }}\n                                />\n                            )}\n                        </form>\n                    </Paper>\n                </div>\n            </div>\n            <Footer />\n        </div>\n    )\n}\n\nexport default PetForm;"]},"metadata":{},"sourceType":"module"}